# -*- coding: utf-8 -*-
import re
import urllib2
import os
import json

cids = [32398021,31564437,32170872,15158842,18892807,13579495,31628489,31492427,18342281,13544245,15844302,31012461,21902102,13318393,33979894,13324156,19848832,33786630,18359066,12180970,17357221,13156527,11484834,31047543,13394817,32739081,11882842,15980970,19733030,18264368,16102449,32636894,21331473,33093141,17087755,11783839,11636339,34400802,11783269,33664076,10970421,17925997,31397260,20083038,15569316,31414139,18782269,13313905,13539680,17731391,16203530,16242612,18105756,32084342,17345951,18089463,17997092,18004517,31147152,16431461,13412805,20762261,31160852,19698281,13458192,15736043,12029676,11775303,11714509,13243040,13230339,21805750,16997471,16478821,31761659,12985917,15428001,12037761,21029222,21066777,34557954,18299318,16392560,12789312,21879528,31251197,21033025,21752234,11829867,20904900,15297333,19900031,18849524,32666778,20507272,21712450,16910187,21159969,33431681,20673110,13429419,20598343,13451304,32514229,17183174,32435651,20122103,21856680,33357614,15123376,16655939,18515537,31217948,17894623,34034906,31761104,18383555,19136884,11824474,19022867,34351419,13522253,13393048,20900395,34709405,12807008,30812041,15223833,19768903,13544154,19003717,17742811,13100624,12000948,34301508,17779687,12933612,11875303,13407173,13092919,34584852,13238652,20494913,31591794,31622404,19579000,12767588,15252911,31427619,11532549,20958966,16143565,21667358,13245942,20730069,34139170,33200886,19411694,33039869,20867222,21035097,11583188,13419218,16481314,16566262,21052774,16412722,17834458,17579724,20006072,15158969,34300445,19258696,11867253,19533982,11717526,13207714,31600788,21874895,34590075,20884490,13146610,33075775,31393921,32043781,19265101,19097909,12752848,17671763,20947698,17342476,17369445,16547867,19574564,12181425,34335717,19254961,16456147,17287515,15072568,13295857,18977327,30892281,18228561,34130120,32417870,34345939,13526598,34412589,32219799,33972039,12996714,13351072,11842253,19434750,31515184,19541618,18694245,20442227,11766482,11825000,12817052,20724571,11693898,34496338,32552831,33445247,18159835,16583705,17156286,21048656,19920147,19394677,19901060,19833098,16743022,21530418,31727428,11620887,31612314,19515115,17930020,13199471,11617225,34495635,13039707,13169533,13217917,34504479,20957115,18426293,21697765,32350340,11736033,20325394,18048288,11855847,21224684,20464279,20035521,16301502,16903400,11601981,12940268,19045189,34006880,31820529,17184612,33252656,32413589,13586213,19072389,12975037,17790064,18736787,20332724,13395226,13424141,18485951,19519745,13034718,11636591,32466193,15854738,17727755,15272514,15642588,18995751,19427143,31011854,11848163,16846234,11591407,13151815,11532113,11868380,19236467,20095474,18328913,33674931,17928382,19524571,11808168,31044781,31398432,11685653,17381790,12044686,15258806,30830896,30844379,11616853,13024907,32875608,15836930,32713807,11721510,15675407,16579465,11528850,16099069,18493886,20118590,11769443,15576000,34454091,18581145,15630097,13471573,11887709,12948143,20050296,21483537,33575725,19309979,12763227,19044986,17235802,19216895,32873808,12074607,13090649,17836453,18055519,12961321,33706703,17869298,32496813,13394631,20444560,16629100,16438190,20812700,30885989,30908715,12770709,15737056,17002446,31543234,16686052,34366478,20098535,15232734,18346312,19737476,12997710,32283193,16340279,17896247,31824403,19637405,12432338,33152378,31264424,33254346,33642763,15101538,20839921,31558959,11724273,18694838,21530108,12042063,12793010,11694863,18151511,17876807,18675990,13189784,34534867,17542866,18279860,12939873,16434573,33167319,33545285,21336970,21472671,18260949,13294382,11879562,11695992,13390532,13209822,11667185,12875233,18747091,31157288,31786358,16819145,32180605,34330900,12814556,16111202,34510320,13460745,15601215,11638073,32388232,18985487,15069609,18325978,17495000,32006779,19422656,32430780,21000200,13271130,31357648,12948879,17084649,20935318,34554504,32739182,12964707,13523508,17337196,32072112,13064874,34791999,16337915,19067732,15048541,34159399,33418907,20326075,32769756,34256722,19699554,13379997,18763515,18301819,15978271,33253659,19524790,20890119,16900651,20158193,19526611,16851838,15488625,32399272,13194326,13450147,19213141,12842887,21150802,13237204,11717349,19794545,12908246,11668021,18992038,13149861,13353389,19814886,18468345,11766686,18669313,11621998,19319537,33237756,13353469,32465216,21733110,21214804,33980039,11886753,17815234,21489541,13551790,16600337,19938164,21759957,31469291,11591655,12011521,31192749,33212655,13590029,11475606,34291412,19446169,13260483,33542472,16848390,17626018,30876970,13015554,19931812,12070623,15169599,31691239,11689061,13422350,21647023,13268745,21098870,13032167,32891674,19903964,18803507,18385740,17617024,13394131,33510853,20593570,13372339,20046376,11545586,33253080,34104846,18902646,32697305,11698231,11761706,11759643,20668141,18551297,21768875,34006523,13566923,20866634,21603056,20845320,16949902,15475574,20501398,16442952,13496235,13395542,11607225,21693591,34104618,12825387,34354913,12030336,13270406,11679991,31993039,18226539,21677803,16122582,16197111,20082832,21535943,19238727,34217465,20344119,20904835,30824262,19457571,19313343,20906335,34268748,21525040,33936987,20475675,12862766,11710258,31390276,31669482,12895356,17100964,11668577,12051049,20344337,11539802,18917204,12862055,16577724,34079428,34376813,19772949,20448438,12151592,11890445,11559215,17996271,12830450]

root = 'd:\\pystudy\\nc\\'
prefix = 'http://map.naver.com/local/siteview.nhn?code='

"""

for cid in cids:
    url =  prefix + str(cid)
    try:
        resp = urllib2.urlopen(url)
        i = 1
    except:
        i = 0
        pass
    if i == 1:
        txt = resp.readlines()
        a_file = open(root + str(cid) + '.txt', 'w')
    
        for line in txt:
            a_file.write(line)
    a_file.close()"""
    
    
files = os.listdir(root)
for file in files:
    #print file
    
    
    sid = file.replace('.txt','')
    title = ''
    tel = ''
    cate = ''
    addr = ''    
    
    in_file = open(root + file, 'r')
    for line in in_file:
        if line.find('siteview') == 1:
            #print line
            st_nm = line.find('"name":')
            ed_nm = line.find('",    "address')
            title = line[st_nm + 9:ed_nm]
            st_tel = line.find('"phone":')
            ed_tel = line.find('",    "phoneOrigin":')
            tel = line[st_tel + 10:ed_tel]
            st_cate = line.find('"category":')
            ed_cate = line.find('",    "twoDepthCategory":')
            cate = line[st_cate + 13:ed_cate].replace('&gt;', '>')
            st_addr = line.find('"address":')
            ed_addr = line.find('",    "roadAddr":')
            addr = line[st_addr + 12:ed_addr]
            print sid + '\t' + title + '\t' + tel + '\t' + cate + '\t' + addr